---
//Source: https://docs.astro.build/en/recipes/i18n/#let-users-switch-between-languages
import { languages } from "@i18n/ui";
import { getLangFromUrl } from "@i18n/utils";

const currentLang = getLangFromUrl(Astro.url);
const langKeys = Object.keys(languages);
const currentLangIndex = langKeys.indexOf(currentLang);
const nextLang = langKeys[(currentLangIndex + 1) % langKeys.length];
---

<ul class="language__switch">
  {
    Object.entries(languages)
      .filter(([lang]) => lang === currentLang)
      .map(([lang, label]) => (
        <li>
          <a href={Astro.url.pathname.replace(lang, nextLang)}>
            <img src={`/assets/svg/${lang}.svg`} alt={`${languages[lang]}`} />
            {label}
          </a>
        </li>
      ))
  }
</ul>
<style>
  .language__switch {
    padding-left: 0;
  }
  .language__switch li {
    list-style: none;
  }
  .language__switch li a {
    text-decoration: none;
    font-weight: 700;
    display: flex;
    gap: 0.5rem;
  }
  .language__switch img {
    height: auto;
    width: 20px;
  }
</style>
